<!DOCTYPE html>
<html>
<head>
    <title>Fantasy league</title>
    <script type="text/javascript" src="points.json"></script>
    <script type="text/javascript" src="teams.json"></script>
    <link rel="icon" type="image/png" href="trophy.png"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="style.css"/>
    <script src="interact.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  
</head>
<body>
   <table class="table">
     <thead>
     	 <th>Rank</th>
     	 <th>Team Name</th>
     	 <th>Player 1</th>
     	 <th>Points 1</th>
         <th>Team 1</th>
     	 <th>Player 2</th>
         <th>Points 2</th>
         <th>Team 2</th>
         <th>TotalPoints</th>
     </thead>
     <tbody>
       
      <script language="javascript" type="text/javascript">

          var body = document.getElementsByTagName('tbody')[0];
          for (var a = 0; a < myTeams.length; a++) {
            var teamName = myTeams[a].teamName;
            var tr = document.createElement('tr');

            var td1 = document.createElement('td');
            var attDataLabel = document.createAttribute("data-label");
            attDataLabel.value = "Rank";
            td1.setAttributeNode(attDataLabel);
            td1.appendChild(document.createTextNode(a+1));
            tr.appendChild(td1);

            var td2 = document.createElement('td');
            var attDataLabel = document.createAttribute("data-label");
            attDataLabel.value = "Team Name";
            td2.setAttributeNode(attDataLabel);
            td2.appendChild(document.createTextNode(myTeams[a].teamName));
            tr.appendChild(td2);

            var td3 = document.createElement('td');
            var attDataLabel = document.createAttribute("data-label");
            attDataLabel.value = "Player 1";
            td3.setAttributeNode(attDataLabel);
            td3.appendChild(document.createTextNode(myTeams[a].player1));
            tr.appendChild(td3);

            var td4 = document.createElement('td');
            var attDataLabel = document.createAttribute("data-label");
            attDataLabel.value = "Points 1";
            td4.setAttributeNode(attDataLabel);
            td4.appendChild(document.createTextNode(scores[a].score1));
            tr.appendChild(td4);

            var td5 = document.createElement('td');
            var button1 = document.createElement('button');
            var dropdownDiv = document.createElement("div");
            button1.className = "dropbtn " + a;
            button1.appendChild(document.createTextNode("View Team"))
            dropdownDiv.id = "myDropdown" + a + "0";
            dropdownDiv.className = "dropdown-content"
            td5.appendChild(button1);
            tr.appendChild(td5);
            button1.onclick = function(a){
              var index = a.target.classList[1];
              document.getElementById("myDropdown"+index+"0").classList.toggle("show");
            };
            td5.appendChild(dropdownDiv);
            for (var j=0; j<myTeams[a].team1.length; j++) {
              var textLink = document.createElement("a");
              var isCaptian = (myTeams[a].team1Captain === myTeams[a].team1[j]);
              var isViceCaptian = (myTeams[a].team1ViceCaptain === myTeams[a].team1[j]);
              var text = myTeams[a].team1[j];
              var points = pointsTable[myTeams[a].team1[j]];
              
              var boldText;
              if(isCaptian) {
                boldText = "(C) " + text;
                text = " - " + (points*2) + " pts."
              } else if(isViceCaptian) {
                boldText = "(VC) " + text;
                text = " - " + (points*1.5) + " pts."
              } else {
                boldText = text;
                text = " - " + points + " pts.";
              }
              
              if (boldText) {
                var boldSpan = document.createElement("b");
                boldSpan.appendChild(document.createTextNode(boldText));
                textLink.appendChild(boldSpan);
              }
              textLink.appendChild(document.createTextNode(text));
              dropdownDiv.appendChild(textLink);
            }
            

            var td6 = document.createElement('td');
            var attDataLabel = document.createAttribute("data-label");
            attDataLabel.value = "Player 2";
            td6.setAttributeNode(attDataLabel);
            td6.appendChild(document.createTextNode(myTeams[a].player2));
            tr.appendChild(td6);

            var td7 = document.createElement('td');
            var attDataLabel = document.createAttribute("data-label");
            attDataLabel.value = "Score 2";
            td7.setAttributeNode(attDataLabel);
            td7.appendChild(document.createTextNode(scores[a].score2));
            tr.appendChild(td7);

            var td8 = document.createElement('td');
            var button2 = document.createElement('button');
            var dropdownDiv2 = document.createElement("div");
            button2.className = "dropbtn " + a;
            button2.appendChild(document.createTextNode("View Team"))
            dropdownDiv2.id = "myDropdown" + a + "1";
            dropdownDiv2.className = "dropdown-content"
            td8.appendChild(button2);
            tr.appendChild(td8);
            button2.onclick = function(a){
              var index = a.target.classList[1];
              document.getElementById("myDropdown"+index+"1").classList.toggle("show");
            };
            td8.appendChild(dropdownDiv2);
            for (var k=0; k<myTeams[a].team1.length; k++) {
              var textLink2 = document.createElement("a");
              var isCaptian = (myTeams[a].team2Captain === myTeams[a].team2[k]);
              var isViceCaptian = (myTeams[a].team2ViceCaptain === myTeams[a].team2[k]);
              var points = pointsTable[myTeams[a].team2[k]];
              var text2 = myTeams[a].team2[k];

              var boldText2;
              if(isCaptian) {
                boldText2 = "(C) " + text2;
                text2 = " - " + (points*2) + " pts."
              } else if(isViceCaptian) {
                boldText2 = "(VC) " + text2;
                text2 = " - " + (points*1.5) + " pts."
              } else {
                boldText2 = text2;
                text2 = " - " + points + " pts.";
              }
              
              
              if (boldText2) {
                var boldSpan2 = document.createElement("b");
                boldSpan2.appendChild(document.createTextNode(boldText2));
                textLink2.appendChild(boldSpan2);
              }

              textLink2.appendChild(document.createTextNode(text2));
              dropdownDiv2.appendChild(textLink2);
            }
            

            var td9 = document.createElement('td');
            var attDataLabel = document.createAttribute("data-label");
            attDataLabel.value = "Total Score";
            td9.setAttributeNode(attDataLabel);
            td9.appendChild(document.createTextNode(scores[a].totalScore));
            tr.appendChild(td9);
            
            body.appendChild(tr);
          }

        </script>
     </tbody>
   </table>
</body>
</html>
